<!doctype html>
<html class="no-js">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Part (E): fitness score generation" href="A3_1_5.html" /><link rel="prev" title="Part (C): XFdtd output conversion code" href="A3_1_3.html" />

    <!-- Generated with Sphinx 4.5.0 and Furo 2023.07.26 -->
        <title>Part (D1) and (D2): AraSim execution - GENETIS documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?digest=369552022d0b975c8e74270ce6eabe0fb7978f24" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">GENETIS documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon no-toc" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">GENETIS documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../background/julie_23.html">Discussion: Dissertation Excerpt</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Discussion: Dissertation Excerpt</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../background/ch2/ch2_idx.html">Evolutionary Computation and Machine Learning </a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../background/ch3/ch3_idx.html">Antenna Optimization with Genetic Algorithms </a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Antenna Optimization with Genetic Algorithms </div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../background/ch3/ch3_2.html">Early GENETIS Investigations </a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../background/ch3/ch3_3/ch3_3_idx.html">Discussion: the Loop </a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../background/ch3/ch3_4/ch3_4_idx.html">Physical Antenna Evolution Algorithm (PAEA) </a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../background/ch3/ch3_5/ch3_5_idx.html">Antenna Response Evolution Algorithm </a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../background/ch3/ch3_6.html">Conclusion </a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../julie_appdx.html">User’s Guide </a><input checked="" class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of User’s Guide </div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../A1.html">Before You Begin </a></li>
<li class="toctree-l2"><a class="reference internal" href="../../A2.html">How to: Getting Started  </a></li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../A3_idx.html">PAEA Introduction </a><input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of PAEA Introduction </div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="A3_1_main.html">Reference: PAEA Loop </a><input checked="" class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Reference: PAEA Loop </div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="A3_1_1.html">Part (A): genetic algorithm </a></li>
<li class="toctree-l4"><a class="reference internal" href="A3_1_2.html">Part (B1) &amp; (B2): XFdtd </a></li>
<li class="toctree-l4"><a class="reference internal" href="A3_1_3.html">Part (C): XFdtd output conversion code</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Part (D1) and (D2): AraSim execution</a></li>
<li class="toctree-l4"><a class="reference internal" href="A3_1_5.html">Part (E): fitness score generation</a></li>
<li class="toctree-l4"><a class="reference internal" href="A3_1_6.html">Part (F): Plotting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../A3_2.html">A.3.2 Running the Loop </a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../A4.html">The AREA Software</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../genetic_algorithm/ga_doc.html">Reference: Genetic Algorithm</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon no-toc" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="part-d1-and-d2-arasim-execution">
<span id="a314"></span><h1>Part (D1) and (D2): AraSim execution<a class="headerlink" href="#part-d1-and-d2-arasim-execution" title="Permalink to this headline">#</a></h1>
<p>Sub-Bash scripts for parts (D1) and (D2) are responsible for executing AraSim.
AraSim is a neutrino simulation software that simulates the environment the ARA
antennas experience in Antarctica when taking data. AraSim generates neutrino
events independent of each other, with interaction point locations chosen with a
uniform density in the ice. For computational ease, neutrinos are generated
within a 3-5 km radius around the center of a single station for neutrino
energies from <span class="math notranslate nohighlight">\(E_\nu = 10^{17}\)</span> eV-<span class="math notranslate nohighlight">\(10^{21}\)</span> eV, with the
larger radii used for higher energies. AraSim then performs ray tracing and
attenuation on the signal and calculates what electromagnetic radiation reaches
the station. At the station, the gain and phase data from XF are used to
calculate the sensitivity of the antenna to neutrinos. This value is extracted
as an effective sensitive ice volume (called the ‘effective volume’). This
effective volume is our fitness measurement, called the fitness score, for all
individuals. For more information on what AraSim does, please see
<strong>Chapter 3.2.2.2</strong>.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<ul class="simple">
<li><p>reference 3.2.2.2</p></li>
</ul>
</div>
<p>Before going into the detail of these scripts, it’s important to note that to
run AraSim, we need to submit jobs in order to fully utilize the computational
power of the supercomputing cluster. To submit a job, a short script is run that
contains a number of parameters for the cluster. Jobs allow the user to specify
the number of cores to use, the number of GPUs to use, and a time limit. You are
also more easily able to run many jobs in parallel, which means we can run
multiple simulations at once instead of waiting for each individual simulation
to run before starting the next. Note that running a program through the command
line instead of submitting a job will work, but it will be significantly slower
and may time out before completion. Jobs allow the cluster to allocate cores and
time to users appropriately, so you may have to wait for a job to start,
especially if you are requesting significant computational power. Please see
more about job submissions on the <a class="reference external" href="https://www.osc.edu/supercomputing/batch-processing-at-osc/job-submission">OSC site</a>.
Though this may seem intimidating, our software is set up to
automatically submit AraSim jobs; the user bears no responsibility in submitting
the jobs manually. This, as well as the remainder of discussions apropos AraSim,
is noteworthy information that can assist in properly understanding our software
for future modifications; however, it is not essential to starting a run if no
modifications are needed.</p>
<p>One more note-worthy mention is that because these jobs take a long time, we
have modified our run so that, for each individual, we break up the number of
neutrinos into smaller jobs and utilize the ability to run simulations in
parallel. For example, if our variable NNT=30,000, making Seeds=10 means that we
divide a total of 300k neutrinos into 10 jobs that will run in parallel; this
dramatically speeds up our run time.</p>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>change this into <code class="docutils literal notranslate"><span class="pre">part_d_job1.py</span></code> and <code class="docutils literal notranslate"><span class="pre">part_d_job2.py</span></code> API</p>
</div>
<p>In the rest of this section, we will discuss the two sub-Bash scripts that are
responsible for running the simulation of our antennas in Antarctica using
AraSim. Part (D1) is responsible for running two things: (1) it moves each .dat
file into a folder AraSim can access, while changing it to a .txt, which is what
AraSim reads, and (2) it runs AraSim for each individual and moves the output
into the <code class="docutils literal notranslate"><span class="pre">Antenna_Performance_Metric</span></code> folder. It also makes a directory for
all errors and output files from AraSim to be dumped. Part (D2) is responsible
for telling our loop to wait until AraSim is finished running. This will check
the completed files and make sure they all appear before moving on to the next
part.  This checks that both (1) the jobs finished and (2) that they were
successful. If it is unsuccessful, it will resubmit the job. It does so by
using the <code class="docutils literal notranslate"><span class="pre">grep</span></code> command to search the files for segmentation violations. If
it sees one, it resubmits that job. Note that we also submit a job for the
actual ARA bicone during the first generation so it can be compared against in
our run.</p>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="A3_1_5.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Part (E): fitness score generation</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="A3_1_3.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Part (C): XFdtd output conversion code</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, OSU GENETIS Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer no-toc">
      
      
      
    </aside>
  </div>
</div><script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/scripts/furo.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    </body>
</html>